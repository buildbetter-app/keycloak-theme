import{r,j as e}from"./index-C5PdjIHg.js";import{u as M}from"./useGetClassName-CwZW_X6q.js";import{H as T}from"./header-node-6kTK8y6y.js";import{I as s,S as Z}from"./submit-input-C2Uh2Mp9.js";import{B as J}from"./back-to-login-SzeOpav2.js";import{D as K,S as W}from"./social-provider-DbMI-thn.js";import{S as w}from"./chunk-BL2ZZSHG-CaOGZYlU.js";import{b as $,F as G}from"./KcApp-Jtyk8-3-.js";import{A as O}from"./chunk-FAWTVNS3-c253KC6Z.js";import{F as o}from"./chunk-VGESXGVT-DlzrV6G-.js";import"./usePrepareTemplate-SbXqsSyJ.js";import"./useGetClassName-COq4TTx-.js";function le(j){const{kcContext:p,i18n:v,doUseDefaultCss:C,Template:N,classes:S}=j,{url:f,register:i,realm:y,passwordRequired:b,recaptchaRequired:q,recaptchaSiteKey:P,social:m}=p,E=new URLSearchParams(window.location.search),[n,D]=r.useState(i.formData.email??E.get("email")??""),[d,R]=r.useState(i.formData.firstName??""),[u,k]=r.useState(i.formData.lastName??""),[l,F]=r.useState(""),[c,A]=r.useState(""),[t,U]=r.useState({}),[V,B]=r.useState(!1),x=a=>a?"":"Required",I=()=>{if(n){if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/g.test(n))return"Invalid email address"}else return"Required";return""},L=()=>{if(l){if(l.length<8)return"Password must be at least 8 characters"}else return"Required";return""},z=()=>{if(c){if(l!==c)return"Passwords do not match"}else return"Required";return""},h=()=>{U({firstName:x(d),lastName:x(u),email:I(),password:L(),passwordConfirm:z()})},H=M(a=>{a.preventDefault(),B(!0);const g=a.target;g.checkValidity()===!0?g.submit():h()});return r.useEffect(()=>{V&&h()},[d,u,n,l,c]),e.jsxs(N,{kcContext:p,i18n:v,doUseDefaultCss:C,classes:S,headerNode:e.jsx(T,{title:"Join BuildBetter",subtitle:"Make better product decisions, 5x faster."}),children:[e.jsxs("form",{id:"kc-register-form",className:"space-y-2",action:f.registrationAction,method:"post",onSubmit:a=>{a.preventDefault(),a.stopPropagation(),H(a)},noValidate:!0,children:[e.jsx(s,{type:"text",id:"firstName",name:"firstName",defaultValue:d,placeholder:"First name",autoComplete:"given-name",onChange:a=>R(a.target.value),required:!0}),t.firstName?e.jsx(o,{children:t.firstName}):null,e.jsx(s,{type:"text",id:"lastName",name:"lastName",defaultValue:u,autoComplete:"family-name",placeholder:"Last name",onChange:a=>k(a.target.value),required:!0}),t.lastName?e.jsx(o,{children:t.lastName}):null,e.jsx(s,{type:"email",id:"email",name:"email",defaultValue:n,autoComplete:"email",placeholder:"Email",required:!0,onChange:a=>D(a.target.value)}),t.email?e.jsx(o,{children:t.email}):null,!y.registrationEmailAsUsername&&e.jsx(s,{type:"text",id:"username",name:"username",defaultValue:i.formData.username??"",autoComplete:"username",placeholder:"Username"}),b&&e.jsxs(e.Fragment,{children:[e.jsx(s,{type:"password",id:"password",name:"password",autoComplete:"new-password",placeholder:"Password",onChange:a=>F(a.target.value),required:!0,minLength:8}),t.password?e.jsx(o,{children:t.password}):null,e.jsx(s,{type:"password",id:"password-confirm",name:"password-confirm",onChange:a=>A(a.target.value),placeholder:"Confirm Password",required:!0}),t.passwordConfirm?e.jsx(o,{children:t.passwordConfirm}):null]}),q&&e.jsx("div",{className:"form-group",children:e.jsx("div",{children:e.jsx("div",{className:"g-recaptcha","data-size":"compact","data-sitekey":P})})}),e.jsx(w,{}),e.jsx(Z,{value:"Create Account"}),e.jsx(w,{})]}),e.jsxs($,{position:"relative",py:4,children:[e.jsx(K,{}),e.jsx(O,{opacity:.5,children:"or"})]}),e.jsxs(G,{direction:"column",className:"space-y-4 mt-4",children:[m&&m.providers&&m.providers.map(a=>r.createElement(W,{...a,prefix:"Sign up with ",key:a.providerId})),e.jsx(J,{loginUrl:f.loginUrl,target:"Login"})]})]})}export{le as default};
//# sourceMappingURL=Register-7FvK46e5.js.map
